import{d as _,r as m,l as V,m as B,o as n,w as l,e as d,u as i,b as e,i as p,p as j,a as c,g as v,q as M,n as z,v as I,t as f}from"./app-CAyZZdkS.js";import{Y as D,h as g,G as S,V as N,S as $,r as F}from"./researcherService-DunJD6IL.js";const O={class:"fixed inset-0 z-10 overflow-y-auto"},R={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},E={class:"mt-3 text-center sm:mt-5"},H={class:"relative mt-1"},q={key:0,class:"mt-2 text-sm text-red-600"},G={key:0,class:"mt-4 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-700 rounded-md p-3"},P={class:"flex"},T={class:"ml-3"},Y={class:"mt-1 text-sm text-red-700 dark:text-red-300"},A={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},U=["disabled"],X={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},J=["disabled"],Q=_({__name:"CreateModal",props:{show:{type:Boolean}},emits:["close","created"],setup(x,{emit:y}){const h=x,k=y,o=m({orcid:""}),a=m(!1),r=m({}),b=()=>{o.value={orcid:""},r.value={}},w=()=>(r.value={},o.value.orcid.trim()?/^\d{4}-\d{4}-\d{4}-\d{3}[\dX]$/.test(o.value.orcid)?!0:(r.value.orcid="Formato de ORCID inválido (ej: 0000-0000-0000-0000)",!1):(r.value.orcid="El ORCID es obligatorio",!1)),C=async()=>{if(w()){a.value=!0,r.value={};try{await F.create({orcid:o.value.orcid.trim()}),k("created"),b()}catch(s){r.value.general=s.message}finally{a.value=!1}}};return V(()=>h.show,s=>{s&&b()}),(s,t)=>(n(),B(i($),{show:s.show,as:"template"},{default:l(()=>[d(i(D),{as:"div",class:"relative z-50",onClose:t[2]||(t[2]=u=>s.$emit("close"))},{default:l(()=>[d(i(g),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>t[3]||(t[3]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[3]}),e("div",O,[e("div",R,[d(i(g),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:l(()=>[d(i(S),{class:"relative transform overflow-hidden rounded-xl bg-white px-4 pb-4 pt-5 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6 dark:bg-gray-800"},{default:l(()=>[e("div",null,[t[6]||(t[6]=e("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-700"},[e("svg",{class:"h-6 w-6 text-blue-600 dark:text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),e("div",E,[d(i(N),{as:"h3",class:"text-lg font-semibold leading-6 text-gray-900 dark:text-white"},{default:l(()=>t[4]||(t[4]=[p(" Crear Nuevo Investigador ",-1)])),_:1,__:[4]}),t[5]||(t[5]=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-600 dark:text-gray-300"}," Ingresa el ORCID del investigador para obtener sus datos automáticamente desde la base de datos oficial. ")],-1))])]),e("form",{onSubmit:j(C,["prevent"]),class:"mt-6"},[e("div",null,[t[8]||(t[8]=e("label",{for:"orcid",class:"block text-sm font-semibold text-gray-700 mb-2 dark:text-gray-200"}," ORCID ",-1)),e("div",H,[M(e("input",{id:"orcid","onUpdate:modelValue":t[0]||(t[0]=u=>o.value.orcid=u),type:"text",placeholder:"0000-0000-0000-0000",class:z(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-4 py-3 transition-colors duration-200 bg-white text-gray-900 placeholder-gray-500 dark:bg-gray-800 dark:text-white dark:placeholder-gray-400 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",{"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500 dark:border-red-500 dark:text-red-300 dark:placeholder-red-400":r.value.orcid}]),required:""},null,2),[[I,o.value.orcid]]),t[7]||(t[7]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))]),r.value.orcid?(n(),c("p",q,f(r.value.orcid),1)):v("",!0),t[9]||(t[9]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Formato: 0000-0000-0000-0000 ",-1))]),r.value.general?(n(),c("div",G,[e("div",P,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400 dark:text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",T,[t[10]||(t[10]=e("h3",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"Error",-1)),e("div",Y,f(r.value.general),1)])])])):v("",!0),e("div",A,[e("button",{type:"submit",disabled:a.value,class:"inline-flex w-full justify-center rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-3 text-sm font-semibold text-white shadow-sm hover:from-blue-700 hover:to-blue-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50 disabled:cursor-not-allowed sm:col-start-2 transition-all duration-200"},[a.value?(n(),c("svg",X,t[12]||(t[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):v("",!0),p(" "+f(a.value?"Creando...":"Crear Investigador"),1)],8,U),e("button",{type:"button",onClick:t[1]||(t[1]=u=>s.$emit("close")),disabled:a.value,class:"mt-3 inline-flex w-full justify-center rounded-lg bg-white px-4 py-3 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed sm:col-start-1 sm:mt-0 transition-colors duration-200"}," Cancelar ",8,J)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}});export{Q as _};
